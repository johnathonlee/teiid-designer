FileWriter fw = null;

record(msg){
    if (fw != null && !msg.equals("stopRecording();")) {
        fw.write(msg);
        fw.flush();
    }
}

startRecording(String file){
     if (fw == null) {
         fw = new FileWriter(file);
     }
     else {
         throw Exception("Already recording to "+fw);
     }
}

stopRecording(){
    if (fw != null) {
        fw.close();
        fw=null;
    }
}
